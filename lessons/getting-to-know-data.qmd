---
title: "Getting to Know Your Data in R"
editor: 
  markdown: 
    wrap: 72
---

::: {.callout-caution collapse="false"}
## Learning Goals

At the end of this lesson, you should:

-   How to import data in R
-   know several methods of data exploration in R
-   understand how to make cross tabulations of data
-   know how to make histograms and pairwise plots in R
:::

### Import a csv data set

This code `read_csv()` reads a CSV file named "trial_data.csv" and
assigns it to an object named "data1".

The second line of code uses the "head" function to display the first 5
rows of the "data1" data frame. The `View()` will open the data set in
new RStuido video where you can look up at the rows and columns.

```{r, eval=FALSE}
#data1 <- read.csv("trial_data.csv")

head(data1, 5)
View(data1)
```

```{r, echo=FALSE}
data1 <- read.csv(here::here("data/caribbean_maize.csv"))
head(data1, 5)
#View(data1)
```

## Introduction to Common Data Structures

Previously, we looked at how to a import a dataset in R. Now we need to
consider how those types are arranged into complex structures (that is,
objects) that we can access and manipulate.

There are several data structures commonly used in R:

1.  vector
2.  data.frame
3.  matrix
4.  list

Vectors and data frames are two major object types in R, but there are
other types that provide different functionality. You can learn more
about them [here](../lessons/data-structures.qmd).

-   **THE VECTOR**

A *vector* in R is an object that contain multiple elements of the same
type. In the data1, if we select each column varible, it will be returned as a vector.

Data in R data frames can also be referred to by their column names
using the notation `dataframe$column_name`:

```{r}
yield <- data1$yield
Site <- data1$site
```

The yield and site variables are returned as a vector (with the typical attributes of a
vector: length and names).

1.  Vector Length

To find out how many items a vector has, use the `length()` function:

```{r}
length(yield); length(Site)
```

2.  Sort a Vector To sort items in a vector alphabetically or
    numerically, use the `sort()` function:

```{r}
sort(yield)  # sort a number
sort(Site)  # Sort a character
```

3.  Access Vectors You can access the vector items by referring to its
    index number inside brackets \[\]. The first item has index 1, the
    second item has index 2, and so on: Multiple item can also be
    indexed: `x[c(1,5)]`. If an index position, it repeated, that item
    will be returned as often as it is called:


### The data frame

A collection of vectors all of the name length. Each vector is a single
data type, but different columns can be different data types. This is
similar to a typical workbook you might open in Excel or another
spreadsheet program. These can be only one column wide, but they often
consist of more than that.

In this example, data1 is a data frame which consists of different vectors (site, block, yield,...)

We can create an example data frame using yield and Site variables 

```{r}
d1 <- data.frame(yield, Site)
d1
```


A data frame has attributes for:

-   `nrow` number of rows
-   `ncol` number of columns
-   `colnames` column names
-   `rownames` row names (if none are provided, R will generate integer
    row names starting at 1)

::: callout-note
While duplicate column names in a data frame are allowed, they are not
advised, and may throw an error during data import, depending on the
import function used.
:::

Check the number of rows and columns in a data frame:

```{r}
nrow(data1)
ncol(data1); length(data1)
dim(data1) # tells us row and column lengths in one command
```

Look at the `rownames` and `colnames` atrributes:

```{r}
rownames(data1)
colnames(data1)
```

::: callout-note
The `rownames` attribute can be set, but if it is not, it is
automatically created within R from 1 to the total number of rows. Row
names are a tricky attribute than many packages in R do not support. A
function may toss out your row names without any warning!

In general, I do not recommend setting the row names attribute in data
frames to anything other than the default values unless a package
function specifically requires it.
:::


We can look at the overall structure of a data.frame with `View()`:

```{r, eval=FALSE}
View(data1)
```

If a particularly large file is loaded into R, using `View()` may be
very slow (if you have a large number of rows) and provide an incomplete
view (if you have a large number of columns). In that case, you can use
`str()` to look at a data frame's structure:

```{r}
str(data1)
```

***The data frame is the most common data structure scientists use in R***




### Explore data

Base R also has some useful functions for quickly exploring data frames:

-   `str()`: Show the structure of an R object, including a dataframe
-   summary: Give summaries of each column of a data frame

```{r}
str(data1)

summary(data1)
```

### Object types

By using the `str()` command above, we noticed the object types in this data set. The common object types in this data set includes:

- Yield and ears are shown as 'numeric' and 'integer' which belongs to class - numeric.
- Variables such as  site, and trt belong to character class.
- disease variable belongs to the logical class.


You can check the class of each variable separately by using `class()` function.

```{r}
 class(data1$block)
 class(data1$yield)
 class(data1$disease)
```

data types of individual variables can be coerced into different types.
For example, 

```{r, eval=FALSE}

data1$plot <-  as.character(data1$plot)

data1$plot <- as.numeric(data1$plot) #converting plot back to numeric

```

A character variable can be converted to the factor variable.
Factor is a character variable, with pre-defined levels that are alphabetized. The text "Levels: ..." are the predefined levels associated with that factor. Let's compare this to a character variable by manually converting it to factor.

```{r}
data1$block <- as.factor(data1$block)

str(data1$block) # check structure of the block
```


::: callout-note
For more information how data types are assigned in R and methods of
coercing into differebt types can be assessed
[here](../lessons/data-types.qmd).
:::



### Exploring Data in R

To access the data in any of the variables (columns) in our data frame
we can use a `$` notation. For example, to access the 'block' variable
in our data1, we can use the code below. This tells R that the variety
variable is contained within the data frame data1.

```{r eval=FALSE}
data1$block

```


#### Accessing items

A data set can be indexed by position. You can extract individual elements in a data frame by references the row and column position,
`my_dataframe[row, column]`.

-   Extract the items located in the first 2 row2 and last 2 columns:

**Visual of what we want:**

```{r, echo=FALSE,out.height="50%",out.width="50%"}
knitr::include_graphics("../images/index_ex1.png")
```

*(This graphic is an overlay of green over blue, creating a dark teal
color. The green represents rows indexed, the blue is columns indexed
and the teal is the intersection between those two. If a color is not
visible, that is because it is under the teal overlay.)*

```{r}
data1[1:2, 2:3]
```

-   Extract the first two rows and all of the columns:

```{r, echo=FALSE,out.height="50%",out.width="50%"}
knitr::include_graphics("../images/index_ex2.png")
```

```{r}
data1[1:2, ]
```

*When the column position is left empty, all columns are returned*

-   Extract the entire first column and all rows:

```{r, echo=FALSE,out.height="50%",out.width="50%"}
knitr::include_graphics("../images/index_ex3.png")
```

```{r}
data1[ ,1]
```

*When the row position is left empty, all rows are returned*

-   Extract the values located in the first 2 rows and first two
    columns:

```{r, echo=FALSE,out.height="50%",out.width="50%"}
knitr::include_graphics("../images/index_ex4.png")
```

```{r}
data1[1:2, 1:2]
```

-   Return everything except the third columns

```{r, echo=FALSE,out.height="50%",out.width="50%"}
knitr::include_graphics("../images/index_ex5.png")
```

```{r}
data1[ ,-3]
```

-   Return everything except the first 2 rows:

```{r, echo=FALSE,out.height="50%",out.width="50%"}
knitr::include_graphics("../images/index_ex6.png")
```

```{r}
data1[-(1:2),  ]
```

::: callout-note
## Things to note

Indexing accepts numeric/integer vectors, so you can use a sequence
(`3:10`), or concatenated positions (`c(1, 2, 5, 10)`), or a combination
of both (`c(1:10, 13)`).

When indexing positions in a vector or data frame (or anything else),
the amount of white space does not affect the outcome. These are
equivalent: `d[1,2]`, `d[1, 2]`, `d[ 1, 2]`
:::

#### Column Referencing

Data in R data frames can also be referred to by their column names
using the notation `dataframe$column_name`:

```{r}
data1$yield
```

The data are returned as a vector (with the typical attributes of a
vector: length and names).

This can also be used to create a new column in the data frame:

```{r}
data1$var4 <- seq.int(from=0,to=30,length.out=288) 
```

In this example, a new column called "var4" was created, consisting of
sequence numbers from zero to 30.


#### Value replacement

There are likely to be moments when you want to replace values in a data
frame or vector with something else. You can do that with indexing and
variable assignment.

Let's image that we want to assign the third value in the sixth column
as `NA`. First, we index the that position, then we assign a value to it
(`NA` in this case):

```{r}
data1[3, 6] <- NA
```






### Make Some Simple Plots

Here we are creating a histogram to look at data distribution of the
'yield' variable from data1 using a `hist()` function.

The `boxplot()` function in R is used to create a boxplot for the
selected variables. In the code chunk below, a boxplot of yield for each
replication is created, the xlab and ylab shows the title of x-axis and
y-axis, respectively. The `main=`, gives the title to the graph.

```{r}
hist(data1$yield)

# pairwise plots
data1$block
# Create the box plot
boxplot(yield ~ block, data = data1,
        main = "Yield Graph",
        xlab = "Rep",
        ylab = "Yield")
```



### Calculate Some Values

```{r}


```


### Install and Load Packages

1.  To install packages:

You can either use `install.pcakages()` function

```{r}
install.packages("dplyr")   # install 'dplyr' package
```

Or click Tools \> Install packages. Write the package name in dialog,
then click *install*.

2.  To Load packages:

Once you install the package, you need to load it so that it becomes
available to use. Simply use `library()` function.

```{r}
library(dplyr)  # load 'dplyr' package
```

2.  mention vectorization (give examples)

3.  bring up these two data structures: data frame and the vector

4.  discuss data types: numeric, character, factor

5.  pull content from the other lessons and link to those lessons (see
    example below)

### Access Data

::: callout-tip
## Putting it all together

Vectors and data frames are two major object types in R, but there are
other types that provide different functionality. You can learn more
about them [here](../lessons/data-structures.qmd)
:::
